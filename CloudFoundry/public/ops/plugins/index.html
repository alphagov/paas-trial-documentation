<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cloud.gov documentation">
    <meta name="author" content="18f">
    <meta name="generator" content="Hugo 0.14" />

    <title>Plugins</title>

    <link href="/css/bootstrap-theme.css" rel="stylesheet">
    <link href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/style-responsive.css" rel="stylesheet" />
    <link href="/css/monokai_sublime.css" rel="stylesheet" />

  </head>

  <body>
  
  <section id="container" class="">

      
      <header class="header black-bg">
            <div class="toggle-nav">
                <i class="fa fa-bars"></i>
                <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
            </div>

            
            <a href="/" title="Home">
              <h2 class="main">docs.cloud.gov</h2>
            </a>
            
            <div class="top-nav notification-row">
            </div>

            <div class="nav title-row" id="top_menu">
                <h1 class="nav top-menu">Plugins</h1>
            </div>
      </header>
      


<aside>
    <div id="sidebar" class="nav-collapse">
        
        <ul class="sidebar-menu">
          
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-road'></i>
                
                <span>Getting Started</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/getting-started/setup/">Setup</a> </li>
                    
                    <li><a href="/getting-started/concepts/">Concepts</a> </li>
                    
                    <li><a href="/getting-started/cf-ssh/">Running one off tasks</a> </li>
                    
                </ul>
              
              </li>
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-file-text'></i>
                
                <span>Deploying Apps</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/apps/deployment/">General Deployment Tips</a> </li>
                    
                    <li><a href="/apps/basic-deploy-troubleshooting/">Basic Deploy Troubleshooting</a> </li>
                    
                    <li><a href="/apps/cloning/">Cloning Applications</a> </li>
                    
                    <li><a href="/apps/continuous-deployment/">Continuous Deployment</a> </li>
                    
                    <li><a href="/apps/databases/">Databases</a> </li>
                    
                    <li><a href="/apps/django/">Deploying Django</a> </li>
                    
                    <li><a href="/apps/flask/">Deploying Flask</a> </li>
                    
                    <li><a href="/apps/meteor/">Deploying Meteor</a> </li>
                    
                    <li><a href="/apps/multi-buildpack-deploys/">Deploying Multi-language Projects</a> </li>
                    
                    <li><a href="/apps/rails/">Deploying Rails</a> </li>
                    
                    <li><a href="/apps/static/">Deploying Static Sites</a> </li>
                    
                    <li><a href="/apps/node/">Deploying node.js</a> </li>
                    
                    <li><a href="/apps/durable-logging/">Durable Logging with the ELK Service</a> </li>
                    
                    <li><a href="/apps/moving-apps/">Moving apps between spaces</a> </li>
                    
                    <li><a href="/apps/production-ready/">Production Ready Checklist</a> </li>
                    
                    <li><a href="/apps/apt-get/">Using apt-get</a> </li>
                    
                </ul>
              
              </li>
          
              

            <li class="sub-menu active">
            <a href="javascript:;" class="">
                <i class='fa fa-wrench'></i>
                
                <span>Operations</span>
                <span class="menu-arrow fa fa-angle-down"></span>
            </a>
                <ul class="sub open">
                    
                    <li><a href="/ops/aws-onboarding/">AWS Onboarding</a> </li>
                    
                    <li><a href="/ops/accessing-v1-managed-services/">Accessing v1 Managed Services</a> </li>
                    
                    <li><a href="/ops/changing-password/">Changing a password</a> </li>
                    
                    <li><a href="/ops/creating-a-stemcell-building-vm/">Creating a Stemcell Building VM</a> </li>
                    
                    <li><a href="/ops/creating-a-development-environment-with-bosh-lite/">Creating a dev environment</a> </li>
                    
                    <li><a href="/ops/creating-a-local-dev-environment-in-Virtual-Box/">Creating a local dev environment with Virtual Box</a> </li>
                    
                    <li><a href="/ops/create-user/">Creating a user</a> </li>
                    
                    <li><a href="/ops/creating-a-new-admin-user/">Creating an admin user</a> </li>
                    
                    <li><a href="/ops/deploying-the-docker-broker/">Deploying the Docker Broker</a> </li>
                    
                    <li><a href="/ops/deploying-the-admin-ui/">Deploying the admin UI</a> </li>
                    
                    <li><a href="/ops/elb/">ELB termination</a> </li>
                    
                    <li><a href="/ops/repos/">Github Repos</a> </li>
                    
                    <li><a href="/ops/making-announcements/">Making announcements</a> </li>
                    
                    <li><a href="/ops/metrics/">Metrics</a> </li>
                    
                    <li class="active"><a href="/ops/plugins/">Plugins</a> </li>
                    
                    <li><a href="/ops/policies/">Policies</a> </li>
                    
                    <li><a href="/ops/ports/">Port Descriptions</a> </li>
                    
                    <li><a href="/ops/multiple-instances/">Running Multiple Instances</a> </li>
                    
                    <li><a href="/ops/updating-cf/">Updating Cloud Foundry</a> </li>
                    
                </ul>
              
              </li>
          
              
              </li>
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-columns'></i>
                
                <span>Updates</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/updates/2015-05-29/">5/29/2015</a> </li>
                    
                </ul>
              
              </li>
          
            <li> <a href="https://github.com/18f/cloud-foundry-notes/issues" target="blank"><i class='fa fa-life-ring'></i> <span>Issues & Help</span></a> </li>
            
              <li><a href="https://github.com/18f/cloud-foundry-notes/edit/master/content/ops/plugins.md" target="blank"><i class='fa fa-edit'></i> Refine this Page</a> </li>
            
        </ul>
        
    </div>
</aside>



      
      <section id="main-content">
          <section class="wrapper">

              <div class="row">
                  <div class="col-md-1">
                      
                      
                      
                  </div>
                <div class="col-md-10">
                    <section class="panel">
                      <div class="panel-body">



<p>CloudFoundry includes a framework for plugins. Since CloudFoundry is written for performance in Go, these plugins do not function exactly the same as plugins do in other dynamically-compiled frameworks like Capistrano or Fab. Still, they provide a basic framework for extending the base functionality of the CloudFoundry CLI</p>

<h3 id="using-plugins:dce8ed91d073f65a191aa58c2338afcb">Using Plugins</h3>

<p>Plugins are installed locally onto your system using the <code>cf install-plugin</code> command. <a href="http://docs.cloudfoundry.org/devguide/installcf/use-cli-plugins.html">Detailed instructions on using plugins</a> can be found at the CloudFoundry site, but there are two main means of fetching plugins:</p>

<ol>
<li>You can download a compiled plugin binary from a remote site and install it from local disk.</li>
<li>You can specify a plugin-repo to pull compiled plugins from. The standard CloudFoundry directory is at <a href="http://plugins.cloudfoundry.org/">plugins.cloudfoundry.org</a></li>
</ol>

<p>Please refer to the CloudFoundry documentation for detailed instructions on how to add plugins.</p>

<h3 id="18f-plugins:dce8ed91d073f65a191aa58c2338afcb">18F Plugins</h3>

<p>This section will contain instructions on how to install any useful plugins from either the wider CloudFoundry community or specific to 18F, should there be a need for them. There currently aren&rsquo;t any though, because of the limitations of the current plugin architecture.</p>

<h3 id="developing-plugins:dce8ed91d073f65a191aa58c2338afcb">Developing Plugins</h3>

<p>The CloudFoundry CLI is written in Go and compiled down to an executable. This means that plugins arenâ€™t able to be dynamically linked into the main CLI&rsquo;s code. Instead, plugins are also Go applications that inherit from a base interface and implement a few predefined commands. These applications then run as little localized servers essentially and get commands via RPC from the CF CLI. <a href="https://github.com/cloudfoundry/cli/tree/master/plugin_examples">The whole architecture is described in depth on the CloudFoundry site</a>. Any plugin you might right will have to implement two commands from the CF Plugin interface:</p>

<ol>
<li>A <code>Run</code> command that is passed a <code>plugin.CliConnection</code> which can be used to invoke any methods within the core CF CLI from your plugin and is also passed arguments from invocation.</li>
<li>A <code>GetMetadata</code> command that returns information about the plugin for displaying help to command-line users.</li>
</ol>

<p>Then you can compile your own plugin and install it. Plugins are able to call any of the commands already in the CLI. They also can read from stdin if you need them to be interactive. It is also possible to have a plugin implement multiple commands through dispatching within the <code>Run</code> method if that&rsquo;s preferable.</p>

<h3 id="what-plugins-can-t-do:dce8ed91d073f65a191aa58c2338afcb">What Plugins Can&rsquo;t Do</h3>

<p>Plugins are only invoked when they are explicitly called within the CLI. In this sense, they resemble <a href="https://api.slack.com/outgoing-webhooks">Slack&rsquo;s outgoing webhooks</a>. There currently isnâ€™t any support for plugins to register themselves to be called at specific points in the deployment cycle, as there is in other deployment mechanisms. The CloudFoundry team has <a href="https://github.com/cloudfoundry/cli/issues/123">prioritized such features at the bottom of their list</a>, and <a href="https://github.com/cloudfoundry/cli/issues/404">this situation remains unchanged a year later</a>.</p>

<p>For cases where we want to wrap an event like <code>cf push</code> with optional before and after actions, the CF team recommends that we should define our own separately named plugin. For example, we might want to have cf push using .gitignore if there is no .cfignore file. To do this with plugins, weâ€™d have to define out our <code>18fpush</code> plugin that copies the .gitignore to .cfignore if not there, calls the regular push action and then undoes the copy. Every person deploying code would have to remember to call <code>cf 18fpush</code> instead of <code>cf push</code> for this to be effective.</p>

<p>Alternatively, we can just edit the CLI code itself so that itâ€™ll contain the new behavior for all pushes. But this means we are adding some code for our specific needs that arenâ€™t necessarily useful for the cloudfoundry CLI code. And it requires us to make sure our fork tracks changes to the main CLI repository. Neither of these cases are ideal, but they are the only options we have.</p>

                      <hr style="margin: 2em auto 0.25em;">
                    </div>
                    </section>

                    <footer>
                      Built with <i class="fa fa-heart"></i> by the cloud.gov team | 
                      <a href="https://github.com/18F/cloud-foundry-notes/issues">
                        Send us feedback
                      </a>
                    </footer>

                </div>
                <div class="col-md-1">
                    
                    
                    
                </div>
              </div>
              
          </section>
      </section>
     
  </section>
  
    
    <script src="/js/jquery-2.1.1.min.js"></script>
    <script src="/js/jquery.scrollTo.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/scripts.js"></script>
  <script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>

