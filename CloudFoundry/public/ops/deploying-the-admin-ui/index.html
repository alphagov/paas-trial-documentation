<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cloud.gov documentation">
    <meta name="author" content="18f">
    <meta name="generator" content="Hugo 0.14" />

    <title>Deploying the admin UI</title>

    <link href="/css/bootstrap-theme.css" rel="stylesheet">
    <link href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/style-responsive.css" rel="stylesheet" />
    <link href="/css/monokai_sublime.css" rel="stylesheet" />

  </head>

  <body>
  
  <section id="container" class="">

      
      <header class="header black-bg">
            <div class="toggle-nav">
                <i class="fa fa-bars"></i>
                <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
            </div>

            
            <a href="/" title="Home">
              <h2 class="main">docs.cloud.gov</h2>
            </a>
            
            <div class="top-nav notification-row">
            </div>

            <div class="nav title-row" id="top_menu">
                <h1 class="nav top-menu">Deploying the admin UI</h1>
            </div>
      </header>
      


<aside>
    <div id="sidebar" class="nav-collapse">
        
        <ul class="sidebar-menu">
          
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-road'></i>
                
                <span>Getting Started</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/getting-started/setup/">Setup</a> </li>
                    
                    <li><a href="/getting-started/concepts/">Concepts</a> </li>
                    
                    <li><a href="/getting-started/cf-ssh/">Running one off tasks</a> </li>
                    
                </ul>
              
              </li>
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-file-text'></i>
                
                <span>Deploying Apps</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/apps/deployment/">General Deployment Tips</a> </li>
                    
                    <li><a href="/apps/basic-deploy-troubleshooting/">Basic Deploy Troubleshooting</a> </li>
                    
                    <li><a href="/apps/cloning/">Cloning Applications</a> </li>
                    
                    <li><a href="/apps/continuous-deployment/">Continuous Deployment</a> </li>
                    
                    <li><a href="/apps/databases/">Databases</a> </li>
                    
                    <li><a href="/apps/django/">Deploying Django</a> </li>
                    
                    <li><a href="/apps/flask/">Deploying Flask</a> </li>
                    
                    <li><a href="/apps/meteor/">Deploying Meteor</a> </li>
                    
                    <li><a href="/apps/multi-buildpack-deploys/">Deploying Multi-language Projects</a> </li>
                    
                    <li><a href="/apps/rails/">Deploying Rails</a> </li>
                    
                    <li><a href="/apps/static/">Deploying Static Sites</a> </li>
                    
                    <li><a href="/apps/node/">Deploying node.js</a> </li>
                    
                    <li><a href="/apps/durable-logging/">Durable Logging with the ELK Service</a> </li>
                    
                    <li><a href="/apps/moving-apps/">Moving apps between spaces</a> </li>
                    
                    <li><a href="/apps/production-ready/">Production Ready Checklist</a> </li>
                    
                    <li><a href="/apps/apt-get/">Using apt-get</a> </li>
                    
                </ul>
              
              </li>
          
              

            <li class="sub-menu active">
            <a href="javascript:;" class="">
                <i class='fa fa-wrench'></i>
                
                <span>Operations</span>
                <span class="menu-arrow fa fa-angle-down"></span>
            </a>
                <ul class="sub open">
                    
                    <li><a href="/ops/aws-onboarding/">AWS Onboarding</a> </li>
                    
                    <li><a href="/ops/accessing-v1-managed-services/">Accessing v1 Managed Services</a> </li>
                    
                    <li><a href="/ops/changing-password/">Changing a password</a> </li>
                    
                    <li><a href="/ops/creating-a-stemcell-building-vm/">Creating a Stemcell Building VM</a> </li>
                    
                    <li><a href="/ops/creating-a-development-environment-with-bosh-lite/">Creating a dev environment</a> </li>
                    
                    <li><a href="/ops/creating-a-local-dev-environment-in-Virtual-Box/">Creating a local dev environment with Virtual Box</a> </li>
                    
                    <li><a href="/ops/create-user/">Creating a user</a> </li>
                    
                    <li><a href="/ops/creating-a-new-admin-user/">Creating an admin user</a> </li>
                    
                    <li><a href="/ops/deploying-the-docker-broker/">Deploying the Docker Broker</a> </li>
                    
                    <li class="active"><a href="/ops/deploying-the-admin-ui/">Deploying the admin UI</a> </li>
                    
                    <li><a href="/ops/elb/">ELB termination</a> </li>
                    
                    <li><a href="/ops/repos/">Github Repos</a> </li>
                    
                    <li><a href="/ops/making-announcements/">Making announcements</a> </li>
                    
                    <li><a href="/ops/metrics/">Metrics</a> </li>
                    
                    <li><a href="/ops/plugins/">Plugins</a> </li>
                    
                    <li><a href="/ops/policies/">Policies</a> </li>
                    
                    <li><a href="/ops/ports/">Port Descriptions</a> </li>
                    
                    <li><a href="/ops/multiple-instances/">Running Multiple Instances</a> </li>
                    
                    <li><a href="/ops/updating-cf/">Updating Cloud Foundry</a> </li>
                    
                </ul>
              
              </li>
          
              
              </li>
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-columns'></i>
                
                <span>Updates</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/updates/2015-05-29/">5/29/2015</a> </li>
                    
                </ul>
              
              </li>
          
            <li> <a href="https://github.com/18f/cloud-foundry-notes/issues" target="blank"><i class='fa fa-life-ring'></i> <span>Issues & Help</span></a> </li>
            
              <li><a href="https://github.com/18f/cloud-foundry-notes/edit/master/content/ops/deploying-the-admin-ui.md" target="blank"><i class='fa fa-edit'></i> Refine this Page</a> </li>
            
        </ul>
        
    </div>
</aside>



      
      <section id="main-content">
          <section class="wrapper">

              <div class="row">
                  <div class="col-md-1">
                      
                      
                      
                  </div>
                <div class="col-md-10">
                    <section class="panel">
                      <div class="panel-body">



<p>This guide covers the high level stops required to configure, deploy and add users to the Admin UI as part of an existing Cloud Foundry environment.</p>

<h4 id="background:dcff8b937f4b31b3a1e70aa7fe3b1715">Background</h4>

<p>The Cloud Foundry Admin UI provides a high level overview of metrics pulled from the Cloud Foundry UAA, Cloud Controller, NATS and databases.</p>

<h4 id="prerequisites:dcff8b937f4b31b3a1e70aa7fe3b1715">Prerequisites</h4>

<ul>
<li>Knowledge of the secrets and other properties specified in the initial deployment manifest.</li>
<li>The <a href="https://github.com/cloudfoundry-incubator/spiff">Spiff</a> templating tool.</li>
<li>The <a href="https://github.com/cloudfoundry/cf-uaac">uaac</a> command line client.</li>
<li>A reachable CF UAA instance.</li>
</ul>

<h4 id="procedure:dcff8b937f4b31b3a1e70aa7fe3b1715">Procedure</h4>

<ol>
<li><a href="#deployment:dcff8b937f4b31b3a1e70aa7fe3b1715">Deployment</a></li>
<li><a href="#configuration:dcff8b937f4b31b3a1e70aa7fe3b1715">Configuration</a></li>
<li><a href="#operation:dcff8b937f4b31b3a1e70aa7fe3b1715">Operation</a></li>
</ol>

<h4 id="deployment:dcff8b937f4b31b3a1e70aa7fe3b1715">Deployment</h4>

<p>As of this writing, instructions for deploying the Admin UI bosh release default to the v3 release.  We have deployed the v4 release as the included deployment template covers required properties and job definitions not present in v3.</p>

<ol>
<li><p>Obtain the current release source.</p>

<pre><code>git clone git@github.com:cloudfoundry-community/admin-ui-boshrelease.git
cd admin-ui-boshrelease
git checkout tags/v4
</code></pre></li>

<li><p>Upload the v4 release to do be used during deployment.</p>

<pre><code>bosh upload release releases/admin-ui-4.yml
</code></pre></li>

<li><p>Source the required properties outlined in <code>templates/admin-ui-deployment.yml</code> from the inintial Cloud Foundry deployment manifests and stubs. Elements to source for the resulting <code>admin-ui-properties.yml</code> include:</p>

<pre><code>compilation:
meta:
networks:
properties:
resource_pools:
update:
</code></pre></li>

<li><p>Create a deployment manifest with spiff after sourcing the required properties into <code>admin-ui-properties.yml</code>. Source the required secrets from the <code>cf-secrets.yml</code> used during the initial deployment.</p>

<pre><code>spiff merge \
  templates/admin-ui-deployment.yml \
  admin-ui-properties.yml \
  /path/to/cf-secrets.yml &gt; manifest.yml
</code></pre></li>

<li><p>Generate a deployment from the manifest.</p>

<pre><code>bosh deployment manifest.yml
</code></pre></li>

<li><p>Initiate the deployment.</p>

<pre><code>bosh deploy 
</code></pre></li>

<li><p>Run the registration errand.</p>

<pre><code>bosh run errand register_admin_ui
</code></pre></li>
</ol>

<h4 id="configuration:dcff8b937f4b31b3a1e70aa7fe3b1715">Configuration</h4>

<p>Admin UI users and administrators must be part of the groups <code>admin_ui.users</code> or <code>admin_ui.admins</code> respectively.  Add new members with the uaac cli:</p>

<pre><code>uaac member add admin_ui.user USERNAME
</code></pre>

<p>Or&hellip;</p>

<pre><code>uaac member add admin_ui.admins USERNAME
</code></pre>

<h4 id="operation:dcff8b937f4b31b3a1e70aa7fe3b1715">Operation</h4>

<p>Access the Admin UI at the uri specified in the deployment manifest. By default this is <code>https://admin.YOUR-SYSTEM-DOMAIN</code> as generated by <code>meta.subdomain &quot;.&quot; properties.system_domain</code> in the <code>templates/admin-ui-deployment.yml</code>.</p>

                      <hr style="margin: 2em auto 0.25em;">
                    </div>
                    </section>

                    <footer>
                      Built with <i class="fa fa-heart"></i> by the cloud.gov team | 
                      <a href="https://github.com/18F/cloud-foundry-notes/issues">
                        Send us feedback
                      </a>
                    </footer>

                </div>
                <div class="col-md-1">
                    
                    
                    
                </div>
              </div>
              
          </section>
      </section>
     
  </section>
  
    
    <script src="/js/jquery-2.1.1.min.js"></script>
    <script src="/js/jquery.scrollTo.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/scripts.js"></script>
  <script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>

