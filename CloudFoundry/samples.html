<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Trial Government PaaS documentation">
    <meta name="author" content="Brett Ansley">

    <title>Cloud Foundry Setup</title>

    <link href="./css/bootstrap-theme.css" rel="stylesheet">
    <link href="./css/font-awesome.min.css" rel="stylesheet" />
    <link href="./css/style.css" rel="stylesheet">
    <link href="./css/style-responsive.css" rel="stylesheet" />
    <link href="./css/monokai_sublime.css" rel="stylesheet" />

  </head>

  <body>
  
  <section id="container" class="">

      
      <header class="header black-bg">
            <div class="toggle-nav">
                <i class="fa fa-bars"></i>
                <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
            </div>

            
            <a href="./index.html" title="Home">
              <h2 class="main">documentation home</h2>
            </a>
            
            <div class="top-nav notification-row">
            </div>

            <div class="nav title-row" id="top_menu">
                <h1 class="nav top-menu">Samples</h1>
            </div>
      </header>
      


<aside>
    <div id="sidebar" class="nav-collapse">
        
        <ul class="sidebar-menu">
          
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-road'></i>
                
                <span>Getting Started</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="./configure.html">Setup</a> </li>
                    
                    <li><a href="./samples.html">Samples</a> </li>
                    
                    <li><a href="./list.html">Bucket list</a> </li>
                    
                </ul>
              
            </li>
          
        </ul>
        
    </div>
</aside>



      
      <section id="main-content">
          <section class="wrapper">

              <div class="row">
                  <div class="col-md-1">
                      
                      
                      
                  </div>
                <div class="col-md-10">
                    <section class="panel">
                      <div class="panel-body">



<h2 id="quotas:1b7cbd6ff4a5f6ecee0c1df5ee074493">Deploying some sample apps</h2>

<p>To make life a little easier for trialling our PaaS options, here’s a selection of sample applications which should help when getting started with the platforms.</p>

<p><em>Note:</em> Because this is a shared environment if your attempt to create an app may fail if one already exists with the same name. You can simply append something unique - like your name - in order to overcome this. There are ways to configure domains that will allow apps with the same names across teams but this is a more advanced topic than this document is intended to cover.</p>

<h3>Spring Music :</h3>

<p>A simple java app using the Spring Framework for managing your record collection. This application supports working with a variety of different database backends - the default deployment uses a simple in-memory database.</p>

<pre><code>git clone https://github.com/cloudfoundry-samples/spring-music.git
cd spring-music
./gradlew assemble
cf push</code></pre>

<p>The app is deployed using an in-memory database with a ${random-word} in it’s URL:</p>

<p>The <code>cf apps </code>command will list the URLs associated with the app.</p>
	
<p>To switch from in-memory database to a postgresql backend:</p>

<pre><code>cf marketplace # view the services available
cf create-service Postgresql "Basic PostgreSQL Plan" my_spring_db
cf bind-service spring-music my_spring_db
cf restart spring-music # restart the app to detect the new db service</code></pre>

<p>Now that the application is using a postgreSQL database backend, you may wish to scale up the number of deployed app instances as follows.</p>

<code>cf scale -i 2 spring-music # run two instances of the app</code>

<p>You should now find that both instances of the app return the same data every time. The load balancer will round-robin connections between the different instances, so hitting shift-refresh in your browser a couple of times will switch between deployed instances. </p>

    
 <h3>Flask SQLAlchemy Sample App :</h3>
 
 <p>A simple microblog app built using Python/Flask using SQLAlchemy to support a postgres DB backend. The default <b>username / password </b> for the flask-sqlalchemy app is <b>admin / default</b></p>

 <pre><code>git clone https://github.com/alphagov/flask-sqlalchemy-postgres-heroku-example.git
cd flask-sqlalchemy-postgres-heroku-example
cf push flask_app --no-start</code></pre>

<p>The Flask-sqlalchemy application requires a backend data service to run, so you will need to create a service instance of postgresql and bind it to the application as follows.</p>

<pre><code>cf marketplace # view the services available
cf create-service Postgresql "Basic PostgreSQL Plan" my_flaskapp_db
cf bind-service flask_app my_flaskapp_db
cf restart flask_app # restart the app to detect the new db service</code></pre>

<p>The <code>cf apps</code> command will list the URLs associated with the app.</p>
    
<p>The flask-sqlalchemy application supports running multiple instances and can be scaled using:</p>

<code>cf scale -i 3 flask_app # run three instances of the app</code>

<h3>Etherpad-lite Sample App :</h3>

<p>Etherpad is a real-time collaborative document editing app built using nodeJS. The master branch of the github source for Etherpad was not working at the time this document was written, so you’ll need to download a tagged release from the releases page.</p>

<pre><code>wget https://github.com/cloudfoundry-community/etherpad-lite-cf/releases/download/1.5.7-cf/etherpad-lite-cf.zip
mkdir etherpad
cd etherpad
unzip ../etherpad-lite-cf.zip
cf push etherpad-lite -m 512M 
# The -m flag allows you to configures the amount of allocated memory</code></pre>

<p>The <code>cf apps</code> command will list the URLs associated with the app.</p>

<p>The etherpad application does not support running more than one instance as there is no shared backend data service support, so if you attempt to scale this app to multiple instances then they will not all share the same data.</p>

<h3>Next steps...</h3>

<p>Now that you're familiar with the platform why not try ticking off all the items on our <a href="list.html">list</a> of tasks to try out on the platform.</p>

<h4 id="service-instances:1b7cbd6ff4a5f6ecee0c1df5ee074493">If something goes wrong</h4>

<p>If you need help or something goes wrong in the environment then feel free to contact us. We have a support email: <a href="mailto:support@governmentpaas.zendesk.com">support@governmentpaas.zendesk.com</a>. We will aim to resolve all tickets within 4 business hours - let us know how we do.</p>


                      <hr style="margin: 2em auto 0.25em;">
                    </div>
                    </section>

                    <footer>
                      
                    </footer>

                </div>
                <div class="col-md-1">
                    
                    
                    
                </div>
              </div>
              
          </section>
      </section>
     
  </section>
  
    
    <script src="/js/jquery-2.1.1.min.js"></script>
    <script src="/js/jquery.scrollTo.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/scripts.js"></script>
  </body>
</html>
